// leanModal v1.1 by Ray Stone - http://finelysliced.com.au
// Dual licensed under the MIT and GPL


(function($){$.fn.extend({leanModal:function(options){var defaults={top:100,overlay:0.5,closeButton:null};var overlay=$("<div id='lean_overlay'></div>");
  $("body").append(overlay);options=$.extend(defaults,options);return this.each(function(){var o=options;$(this).click(function(e){
      var modal_id=$(this).attr("href");
      if(modal_id[0] !== "#"){
        modal_id = this.hash;
      }
      $("#lean_overlay").click(function(){close_modal(modal_id)});
      $(o.closeButton).click(function(){close_modal(modal_id)});
      var modal_height=$(modal_id).data("heightvalue");
      var modal_height_unity = $(modal_id).data("heightunity");
      var modal_width=$(modal_id).data("widthvalue");
      var modal_width_unity = $(modal_id).data("widthunity");
      $("#lean_overlay").css({"display":"block",opacity:0});
      $("#lean_overlay").fadeTo(200,o.overlay);

      
      switch(modal_width_unity){
          case ("%") :
            var margin_left = modal_width/2;
          break;
          default :
            var margin_left = ((modal_width * 100)/ window.innerWidth)/2;
          break;
      }
      
      $(modal_id).css({"width":modal_width+modal_width_unity
                      ,"height":modal_height+modal_height_unity
                      ,"display":"block"
                      ,"position":"fixed"
                      ,"opacity":0
                      ,"z-index":11000
                      ,"left":margin_left+"%"
                      ,"top":o.top+"px"});
      $(modal_id).fadeTo(200,1);e.preventDefault()})});
      function close_modal(modal_id){
        $("#lean_overlay").fadeOut(200);
  $(modal_id).css({"display":"none"})
}}})})(jQuery);
